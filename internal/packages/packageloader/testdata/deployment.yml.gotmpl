apiVersion: apps/v1
kind: Deployment
metadata:
  name: controller-manager
  namespace: "{{.package.metadata.namespace}}"
  annotations:
    package-operator.run/phase: main-stuff
    foobar-from-config: {{ .config.foobar }}
    test-helper: {{ template "test-helper" }}
    other-test-helper: {{ template "other-test-helper" }}
    include-test: {{include "include-test" . | upper | quote}}
    fileGet: |
      {{ getFile "_stuff.txt" }}
    # testing that it's not split on ---
    certificate-key: |
      -----BEGIN CERTIFICATE-----
      MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDBj08sp5++4anG
      -----END CERTIFICATE-----
spec:
  replicas: 1
